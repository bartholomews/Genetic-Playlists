@import model.music.Song
@import io.bartholomews.spotify4s.entities.FullPlaylist
@import views.common.Tab
@import views.html.helper.CSRF

@(playlist: FullPlaylist, songs: Seq[Song])(implicit requestHeader: RequestHeader, messages: Messages)
@js = @{
    List(
        routes.Assets.versioned("js/player.js"),
        routes.Assets.versioned("js/fetch.js"),
    )
}
@main(activeTab = Tab.Spotify, scripts = js) {
    <div class="container">
        <h1>
            <span id="playlist-title">@playlist.name</span>
        </h1>
        <p id="playlist-paragraph">Select restriction on the playlist to be generated.
            Click on a track to listen to a short preview.
            After sending a request, a new playlist will return shortly,
            together with the plotting of its audio analysis features.
        </p>
        <div>
                <!-- https://www.playframework.com/documentation/latest/ScalaForms -->
            @* @helper.form(action = routes.SpotifyController.generatePlaylist) {*@
            @* @CSRF.formField*@
            @* @inputText(PlaylistRequest.form("name"))*@
            @* @(PlaylistRequest.form("name"))*@
            @* @helper.input(PlaylistRequest.form("range")) { (id, name, value, args) =>*@
            @* <label for="playlist-size"></label>*@
            @* <input type="number" id="playlist-size">*@
            @* }*@
            @* }*@
        </div>
        <button
        type="button"
        onclick="jsonRequest()"
        class="btn btn-success btn-lg"
        data-toggle="modal"
        data-target="#modal-playlistName">Generate
        </button>

            <!-- Constraints area: an inline div  -->
            @*
            <div class="constraints">
            <div id="constraints-firstLine" class="inline">
            <p class="inline" id="constraints-firstLine-1">A</p>
            <button type="button" class="btn btn-secondary btn-lg" id="length" value="10"
            data-toggle="modal" data-target="#modal-tracks">10 tracks</button>
            <p class="inline" id="constraints-firstLine-2">playlist with no constraints</p>
            </div>
            <ul id="input-constraints" data-clean="true">
            <!-- here javaScript will dynamically add <p> elements -->
            </ul>
            </div>
            <br/>
            <!-- Dropdown button Constraints modal -->
            <!-- MonotonicValue constraints -->
            <button type="button" class="btn btn-primary" id="monotonicValue-constraints-button"
            data-toggle="modal" data-target="#modal-monotonicValue">
            VALUE CONSTRAINTS</button>
            <!-- MonotonicTransition constraints -->
            <button type="button" class="btn btn-primary" id="monotonicTransition-constraints-button"
            data-toggle="modal" data-target="#modal-monotonicTransition">
            SORT CONSTRAINTS</button>
            <!-- IndexedConstraint (e.g. Include, Exclude) -->
            <button type="button" class="btn btn-primary" id="indexedConstraint-constraints-button"
            data-toggle="modal" data-target="#modal-indexedConstraint">
            TEXTUAL CONSTRAINTS</button>
            <br/><br/>
            <button type="button" class="btn btn-primary" id="reset-constraints"
            onclick="resetConstraints()">CLEAR CONSTRAINTS</button>
            </div>
            *@

            @*
            <div class="container">
            <!--Generated playlist chart with C3.js -->
            <div id="playlist-chart"></div>
            <!-- Generated playlist float chart with C3.js -->
            <div id="playlist-float-chart"></div>
            </div>
            *@
            <!-- Existing Music collection -->
        <div class="container">
            <div class="music-collection" id="music-collection">
                <table class="table table-responsive table-hover table-sm" id="music-collection-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Title</th>
                            <th>Duration</th>
                            <th>Artist</th>
                            <th>Album</th>
                            <th>Loudness</th>
                            <th>Tempo</th>
                            <th>Energy</th>
                            <th>Acousticness</th>
                            <th>Danceability</th>
                            <th>Liveness</th>
                            <th>Speechiness</th>
                        </tr>
                    </thead>
                    <tbody class="music-collection-tbody">
                    @songs.zipWithIndex.map { case (track, index) =>
                    <tr class="clickable playable" id="@track.id" data-preview="@track.preview_url">
                        <th scope="row">@index</th>
                        <td id="@track.id-title">@track.title</td>
                        <td id="@track.id-duration">@track.stringDuration</td>
                        <td id="@track.id-artist">@track.artist</td>
                        <td id="@track.id-album">@track.album</td>
                        <td id="@track.id-loudness">@track.loudness</td>
                        <td id="@track.id-tempo">@track.tempo</td>
                        <td id="@track.id-energy">@track.energy</td>
                        <td id="@track.id-acousticness">@track.acousticness</td>
                        <td id="@track.id-danceability">@track.danceability</td>
                        <td id="@track.id-liveness">@track.liveness</td>
                        <td id="@track.id-speechiness">@track.speechiness</td>
                    </tr>
                    }
                    </tbody>
                </table>
            </div>
        </div>
            <!-- /Existing Music collection -->

            <!-- Newly generated playlist - via createNewPlaylistTable()-->
            @* <div class="container">*@
            @* <div class="new-playlist" id="new-playlist">*@
            @* <table class="table table-responsive table-hover" id="new-playlist-table">*@
            @* <thead>*@
            <!-- /Newly generated playlist -->
}